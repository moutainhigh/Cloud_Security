<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=EDGE">
        <title>ECharts</title>
        <script src="../js/jquery.js"></script>
        <script src="../json/chinaData.json"></script>
        <script src="../js/echarts.min.js"></script>
        <script src="../js/china.js"></script>
        <style>#china-map {width:100%; margin: auto;}</style>
    </head>
    <style type="text/css">
    #backImg{
   	background: url("../image/background4.png");
    </style>
    <body>        
		<div id="backImg" style="width:100%;height:100%;">
			<div id="logo"  onclick="getContextPath()" style="width:116px;height:43px;left:3%;top:3%;position:absolute;z-index:10;background: url('../image/anquanbang_white_logo.png');"></div>
	        <div id="title-map" style="width:100%;height:10% ;"></div>
	        <div id="industry-map" style="width:50%;height:100% ;float:left "></div>
	        <div id="object-map" style="width:50%;height:100% ;right:0px;float:right "></div>
        </div>
        <script>
        
        	//用于html页面获得路径
        	function getContextPath(){   
			    var pathName = document.location.pathname;   
			    var index = pathName.substr(1).indexOf("/");   
			    var result = pathName.substr(0,index+1); 
			    self.location.href=result;
			}  
			/**
			*设置窗体总高度、宽度
			*/
        	var mainContainer=document.getElementById('backImg');
        	var resizemainMapContainer = function () {
	   	   		mainContainer.style.width = window.innerWidth+'px';
	   	 		mainContainer.style.height = window.innerHeight+'px';
			};
			resizemainMapContainer();
			
			var mainContainer=document.getElementById('title-map');
        	var resizemainMapContainer = function () {
	   	   		mainContainer.style.width = window.innerWidth+'px';
	   	 		mainContainer.style.height = window.innerHeight*0.1+'px';
			};
			resizemainMapContainer();
			var myChart = echarts.init(document.getElementById('title-map'));
			/**
			*设置左边窗体总高度、宽度
			*/
        	
			var mapContainer = document.getElementById('industry-map');
			//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
			var resizemapContainer = function () {
	   	   		mapContainer.style.width = window.innerWidth*0.5+'px';
	   	 		mapContainer.style.height = window.innerHeight*0.88+'px';
			};
			resizemapContainer();
            var myChart2 = echarts.init(document.getElementById('industry-map'));
      		/**
			*设置右边窗体高度、宽度
			*/
			var objectContainer = document.getElementById('object-map');
			//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
			var resizeObjectContainer = function () {
	   	   		objectContainer.style.width = window.innerWidth*0.5+'px';
	   	 		objectContainer.style.height = window.innerHeight*0.88+'px';
			};
			resizeObjectContainer();
            var myChart3 = echarts.init(document.getElementById('object-map'));
            $(document).ready(function(){
			option = {
				title :[{
					        text: '恶意URL仿冒行业及仿冒对象分布',
					        //subtext: '分布图',
					        left: 'center',
					        top: '30%',
					        textStyle: {
					            color: '#fff'
					        }
					    }],
			}
			myChart.setOption(option);
	    jQuery.ajax({  
				type: 'GET',  
				        //contentType: 'application/json',  
				url: "getcountbyfieldtop5.html",  
				dataType: 'json',
				        
				success: function(mapdata){
					option2 = {
					title :[{
					        text: '恶意URL仿冒行业分布Top5',
					        //subtext: '分布图',
					        left: 'center',
					        top: '5%',
					        textStyle: {
					            color: '#fff'
					        }
					    }],
			    //color: ['#3398DB'],
			    tooltip : {
			        trigger: 'axis',
			        
			        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
			            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			        }
			    },
			    grid: {
			        left: '3%',
			        right: '4%',
			        bottom: '3%',
			        containLabel: true
			    },
			    xAxis : [
			        {
			            type : 'category',
			            data : mapdata.filed,
			            axisTick: {
					            show: false,
					            lineStyle: {
					                color: '#ddd'
					            }
					        },
					        axisLabel: {
					            interval: 0,
					            textStyle: {
					                color: '#ddd'
					            }
					        },
			           
			        }
			    ],
			    yAxis : [
			        {
			            min:0,
			            max:2000,
			            axisTick: {
					            show: false,
					            lineStyle: {
					                color: '#ddd'
					            }
					        },
					        axisLabel: {
					            interval: 0,
					            textStyle: {
					                color: '#ddd'
					            }
					        },
			            interval:250,
			            type : 'value'
			        }
			    ],
			    series : [
			        {    
			        itemStyle: {
			                    normal: {
			　　　　　　　　　　　　　　//定义一个list，然后根据所以取得不同的值，这样就实现了，
			                        color: function(params) {
			                            // build a color map as your need.
			                            var colorList = [
			                              '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
			                               '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
			                               '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
			                            ];
			                            return colorList[params.dataIndex]
			                        },
			　　　　　　　　　　　　　　//以下为是否显示，显示位置和显示格式的设置了
			                        label: {
			                            show: false,
			                            position: 'top',
			//                             formatter: '{c}'
			                            formatter: '{b}\n{c}'
			                        }
			                    }
			                },
			                
			            name:'恶意URL个数',
			            type:'bar',
			            barWidth: '30%',
			            data:mapdata.count
			        }
			    ]
			};
			myChart2.setOption(option2);
			} 
	    });
	     jQuery.ajax({  
				type: 'GET',  
				        //contentType: 'application/json',  
				url: "getcountbytargettop10.html",  
				dataType: 'json',
				        
				success: function(mapdata){
					option3 = {
							title :[{
							        text: '恶意URL仿冒对象分布Top6',
							        //subtext: '分布图',
							        left: 'center',
							        top: '5%',
							        textStyle: {
							            color: '#fff'
							        }
							    }],
					    //color: ['#3398DB'],
					    tooltip : {
					        trigger: 'axis',
					        
					        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					        }
					    },
					    grid: {
					        left: '3%',
					        right: '4%',
					        bottom: '3%',
					        containLabel: true
					    },
					    xAxis : [
					        {
					            type : 'category',
					            data : mapdata.target.slice(0, 6),
					            axisTick: {
							            show: false,
							            lineStyle: {
							                color: '#ddd'
							            }
							        },
							        axisLabel: {
							            interval: 0,
							            textStyle: {
							                color: '#ddd'
							            }
							        },
					           
					        }
					    ],
					    yAxis : [
					        {
					            min:0,
					            max:1200,
					            axisTick: {
							            show: false,
							            lineStyle: {
							                color: '#ddd'
							            }
							        },
							        axisLabel: {
							            interval: 0,
							            textStyle: {
							                color: '#ddd'
							            }
							        },
					            interval:200,
					            type : 'value'
					        }
					    ],
					    series : [
					        {    
					        itemStyle: {
					                    normal: {
					　　　　　　　　　　　　　　//好，这里就是重头戏了，定义一个list，然后根据所以取得不同的值，这样就实现了，
					                        color: function(params) {
					                            // build a color map as your need.
					                            var colorList = [
					                              '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
					                               '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
					                               '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
					                            ];
					                            return colorList[params.dataIndex]
					                        },
					　　　　　　　　　　　　　　//以下为是否显示，显示位置和显示格式的设置了
					                        label: {
					                            show: false,
					                            position: 'top',
					//                             formatter: '{c}'
					                            formatter: '{b}\n{c}'
					                        }
					                    }
					                },
					                
					            name:'恶意URL个数',
					            type:'bar',
					            barWidth: '30%',
					            data:mapdata.count.slice(0, 6)
					        }
					    ]
					};
					myChart3.setOption(option3);
				} 
	    });
		window.onresize = myChart.resize;
		//
 });		
        </script>
        
    </body>
</html>