<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<title>ECharts</title>
<script src="../js/jquery.js"></script>
<script src="../js/echarts.min.js"></script>

<script src="../js/china.js"></script>
<style>
#china-map {
	width: 100%;
	margin: auto;
}
</style>
</head>
<style type="text/css">
#backImg {
	background: url("../image/background4.png");
}
</style>
<body>
	<div id="backImg" style="width:100%;height:100%;">
		<div id="logo" onclick="getContextPath()"
			style="width:116px;height:43px;left:3%;top:3%;position:absolute;z-index:10;background: url('../image/anquanbang_white_logo.png');"></div>
		<div id="china-map" style="width:50%;height:100% ;float:left "></div>
		<div id="industry-map" style="width:50%;height:50% ;float:right "></div>
		<div id="object-map"
			style="width:50%;height:50% ;right:0px;bottom:0px;float:right "></div>
	</div>
	<script>
        
        	function getContextPath() {
			var pathName = document.location.pathname;
			var index = pathName.substr(1).indexOf("/");
			var result = pathName.substr(0, index + 1);
			self.location.href = result;
		}
			/**
			*设置窗体总高度、宽度
			*/
        	var mainContainer=document.getElementById('backImg');
        	var resizemainMapContainer = function () {
	   	   		mainContainer.style.width = window.innerWidth+'px';
	   	 		mainContainer.style.height = window.innerHeight*1.1+'px';
			};
			resizemainMapContainer();
			
			/**
			*设置左边窗体总高度、宽度
			*/
        	var worldMapContainer = document.getElementById('china-map');
			//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
			var resizeWorldMapContainer = function () {
	   	   		worldMapContainer.style.width = window.innerWidth*0.5+'px';
	   	 		worldMapContainer.style.height = window.innerHeight+'px';
			};
			resizeWorldMapContainer();
			var myChart = echarts.init(document.getElementById('china-map'));
			/**
			*设置右边窗体1高度、宽度
			*/
			var mapContainer = document.getElementById('industry-map');
			//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
			var resizemapContainer = function () {
	   	   		mapContainer.style.width = window.innerWidth*0.5+'px';
	   	 		mapContainer.style.height = window.innerHeight*0.5+'px';
			};
			resizemapContainer();
            var myChart2 = echarts.init(document.getElementById('industry-map'));
      		/**
			*设置右边窗体2高度、宽度
			*/
			var objectContainer = document.getElementById('object-map');
			//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
			var resizeObjectContainer = function () {
	   	   		objectContainer.style.width = window.innerWidth*0.5+'px';
	   	 		objectContainer.style.height = window.innerHeight*0.5+'px';
			};
			resizeObjectContainer();
            var myChart3 = echarts.init(document.getElementById('object-map'));
            $(document).ready(function(){
			//
				jQuery.ajax({  
				type: 'GET',  
				        //contentType: 'application/json',  
				url: "monthUrl.html",  
				dataType: 'json',
				        
				success: function(mapdata){
					option = {
					title :[{
					        text: '钓鱼网站按月发展趋势',
					        //subtext: '分布图',
					        left: 'center',
					        top: '5%',
					        textStyle: {
					            color: '#fff'
					        }
					    }],
   // backgroundColor: '#0f375f',
    tooltip: {
        trigger: 'axis',
        
        axisPointer: {
            type: 'shadow'
        }
    },
    legend: {
    	top:'10%',
        data: ['全部', '有效','新增'],
        textStyle: {
            color: '#ccc'
        }
    },
    xAxis: {
        data: mapdata.month.slice(0, 12).reverse(),
        axisLine: {
            lineStyle: {
                color: '#ccc'
            }
        }
    },
    yAxis: {
        splitLine: {show: false},
        axisLine: {
            lineStyle: {
                color: '#ccc'
            }
        }
    },
    series: [ {
        name: '全部',
        type: 'bar',
        barGap: '-100%',
        barWidth: 10,
        itemStyle: {
            normal: {
                color: new echarts.graphic.LinearGradient(
                    0, 0, 0, 1,
                    [
                        {offset: 0, color: 'rgba(20,200,212,0.5)'},
                        {offset: 0.2, color: 'rgba(20,200,212,0.2)'},
                        {offset: 1, color: 'rgba(20,200,212,0)'}
                    ]
                )
            }
        },
        z: -12,
        data: mapdata.unvalid.slice(0, 12).reverse()
    }, {
        name: '有效',
        type: 'bar',
        barWidth: 10,
        itemStyle: {
            normal: {
                barBorderRadius: 5,
                color: new echarts.graphic.LinearGradient(
                    0, 0, 0, 1,
                    [
                        {offset: 0, color: '#14c8d4'},
                        {offset: 1, color: '#43eec6'}
                    ]
                )
            }
        },
        data: mapdata.valid.slice(0, 12).reverse()
    },{
        name: '新增',
        type: 'line',
        smooth: true,
        showAllSymbol: true,
        symbol: 'emptyCircle',
        symbolSize: 7,
        data: mapdata.increase.reverse()
    },]
};
					myChart.setOption(option);
				} 
	    });
	    
	    jQuery.ajax({  
				type: 'GET',  
				        //contentType: 'application/json',  
				url: "getcountbyfieldtop5.html",  
				dataType: 'json',
				        
				success: function(mapdata){
					option2 = {
					title :[{
					        text: '恶意URL仿冒行业分布Top5',
					        //subtext: '分布图',
					        left: 'center',
					        top: '5%',
					        textStyle: {
					            color: '#fff'
					        }
					    }],
			    //color: ['#3398DB'],
			    tooltip : {
			        trigger: 'axis',
			        
			        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
			            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			        }
			    },
			    grid: {
			        left: '3%',
			        right: '4%',
			        bottom: '3%',
			        containLabel: true
			    },
			    xAxis : [
			        {
			            type : 'category',
			            data : mapdata.filed,
			            axisTick: {
					            show: true,
					            lineStyle: {
					                color: '#ddd'
					            }
					        },
					        axisLabel: {
					            interval: 0,
					            textStyle: {
					                color: '#ddd'
					            }
					        }, axisLine: {
					            lineStyle: {
					                color: '#ccc'
					            }
					        }
			           
			        }
			    ],
			    yAxis : [
			        {
			        	splitLine: {show: false},
			            min:0,
			            max:2500,
			            axisLine: {
					            lineStyle: {
					                color: '#ccc'
					            }
					        },
			            axisTick: {
					            show: true,
					            lineStyle: {
					                color: '#ddd'
					            }
					        },
					        axisLabel: {
					            interval: 0,
					            textStyle: {
					                color: '#ddd'
					            }
					        },
					        
			            interval:500,
			            type : 'value'
			        }
			    ],
			    series : [
			        {    
			        itemStyle: {
			                    normal: {
			　　　　　　　　　　　　　　//定义一个list，然后根据所以取得不同的值，这样就实现了，
			                        color: function(params) {
			                            // build a color map as your need.
			                            var colorList = [
			                              '#ff383f','#ff7474','#a3ffa0','#7cc2fd',
			                               '#4249ff','#9BCA63','#FAD860','#F3A43B','#60C0DD'
			                               
			                            ];
			                            return colorList[params.dataIndex]
			                        },
			　　　　　　　　　　　　　　//以下为是否显示，显示位置和显示格式的设置了
			                        label: {
			                            show: false,
			                            position: 'top',
			//                             formatter: '{c}'
			                            formatter: '{b}\n{c}'
			                        }
			                    }
			                },
			                
			            name:'恶意URL个数',
			            type:'bar',
			            barWidth: '30%',
			            data:mapdata.count
			        }
			    ]
			};
			myChart2.setOption(option2);
			} 
	    });
	     jQuery.ajax({  
				type: 'GET',  
				        //contentType: 'application/json',  
				url: "getcountbytargettop10.html",  
				dataType: 'json',
				        
				success: function(mapdata){
					option3 = {
							title :[{
							        text: '恶意URL仿冒对象分布Top6',
							       // subtext: '分布图',
							        left: 'center',
							        top: '5%',
							        textStyle: {
							            color: '#fff'
							        }
							    }],
					    //color: ['#3398DB'],
					    tooltip : {
					        trigger: 'axis',
					        
					        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
					            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
					        }
					    },
					    grid: {
					        left: '3%',
					        right: '4%',
					        bottom: '3%',
					        containLabel: true
					    },
					    xAxis : [
					        {
					            type : 'category',
					            data : mapdata.target.slice(0, 6),
					            axisTick: {
							            show: true,
							            lineStyle: {
							                color: '#ddd'
							            }
							        },
							        axisLabel: {
							            interval: 0,
							            textStyle: {
							                color: '#ddd'
							            }
							        },axisLine: {
							            lineStyle: {
							                color: '#ccc'
							            }
							        }
					           
					        }
					    ],
					    yAxis : [
					        {
					            splitLine: {show: false},
					           
					            axisTick: {
							            show: true,
							            lineStyle: {
							                color: '#ddd'
							            }
							        },
							        axisLabel: {
							            interval: 0,
							            textStyle: {
							                color: '#ddd'
							            }
							        },axisLine: {
							            lineStyle: {
							                color: '#ccc'
							            }
							        },
					            interval:300,
					            type : 'value'
					        }
					    ],
					    series : [
					        {    
					        itemStyle: {
					                    normal: {
					　　　　　　　　　　　　　　//好，这里就是重头戏了，定义一个list，然后根据所以取得不同的值，这样就实现了，
					                        color: function(params) {
					                            // build a color map as your need.
					                            var colorList = [
					                              '#ff383f','#FE8463','#fffd79','#7cc3fd','#97735b',
					                               '#61459b','#9BCA63','#FAD860','#F3A43B','#60C0DD',
					                               '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
					                            ];
					                            return colorList[params.dataIndex]
					                        },
					　　　　　　　　　　　　　　//以下为是否显示，显示位置和显示格式的设置了
					                        label: {
					                            show: false,
					                            position: 'top',
					//                             formatter: '{c}'
					                            formatter: '{b}\n{c}'
					                        }  
					                    }
					                },
					                
					            name:'恶意URL个数',
					            type:'bar',
					            barWidth: '30%',
					            data:mapdata.count.slice(0, 6)
					        }
					    ]
					};
					myChart3.setOption(option3);
				} 
	    	});
			window.onresize = myChart.resize;
		//
 		});		
        </script>

</body>
</html>